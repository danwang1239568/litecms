import{$ as v,r as n,j as b,k as l,o as V,H as o,a7 as i,T as x,aa as y,ab as E,a9 as c}from"./index-B14M_1DM.js";import{E as U,a as k}from"./el-form-item-ZncFmYZF.js";import{E as R}from"./el-button-BpVWOTvG.js";import{E as S}from"./el-input-rxOn-7Vc.js";import{_ as q}from"./pageContainer-DBtF8K8s.js";import"./constants-AddMQYT0.js";import"./use-form-item-CxPVW2vE.js";import"./_baseClone-Cj_b_JaC.js";import"./_initCloneObject-DMdQNfhv.js";import"./index-r5W6hzzQ.js";import"./event-HEVJa2N9.js";import"./el-scrollbar-CZWBxg-r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={__name:"userPassword",setup(B){const p=y(),w=v(),r=n({oldPwd:"",newPwd:"",rePwd:""}),f={oldPwd:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(d,e,t){e===r.value.oldPwd?t(new Error("新密码不能与旧密码相同")):t()}}],rePwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(d,e,t){e!==r.value.newPwd?t(new Error("两次输入的密码不一致!")):t()}}]},u=n(),_=async()=>{await u.value.validate(),await E(r.value),c.success("密码修改成功"),w.logout(),p.replace("/login")},g=async()=>{u.value.resetFields()};return(d,e)=>{const t=S,s=U,m=R,P=k;return V(),b(q,{title:"重置密码"},{default:l(()=>[o(P,{model:r.value,rules:f,"label-width":"100px",ref_key:"formRef",ref:u,onSubmit:e[3]||(e[3]=x(()=>{},["stop","prevent"])),style:{width:"100%","max-width":"400px"}},{default:l(()=>[o(s,{prop:"oldPwd",label:"旧密码"},{default:l(()=>[o(t,{modelValue:r.value.oldPwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.oldPwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,{prop:"newPwd",label:"新密码"},{default:l(()=>[o(t,{modelValue:r.value.newPwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.newPwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,{prop:"rePwd",label:"确认新密码"},{default:l(()=>[o(t,{modelValue:r.value.rePwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.rePwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(s,null,{default:l(()=>[o(m,{type:"primary",onClick:_},{default:l(()=>e[4]||(e[4]=[i("提交")])),_:1}),o(m,{type:"default",onClick:g},{default:l(()=>e[5]||(e[5]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{J as default};
