import{u as v,r as m,c as b,w as t,o as E,b as l,f as i,a2 as V,bL as y,bM as x,E as c}from"./index-C_bpROGF.js";import{E as U,a as C}from"./el-form-item-BcP7L3nL.js";import{E as R}from"./_plugin-vue_export-helper-CBPVf6gk.js";import{E as S}from"./el-input-CBmRvMQY.js";import{p as k}from"./pageContainer-Curg6BTv.js";import"./_baseClone-8WbI7nzj.js";import"./el-scrollbar-CZiSsJ31.js";const L={__name:"userPassword",setup(q){const p=y(),w=v(),r=m({oldPwd:"",newPwd:"",rePwd:""}),f={oldPwd:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(d,e,o){e===r.value.oldPwd?o(new Error("新密码不能与旧密码相同")):o()}}],rePwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{validator(d,e,o){e!==r.value.newPwd?o(new Error("两次输入的密码不一致!")):o()}}]},u=m(),g=async()=>{await u.value.validate(),await x(r.value),c.success("密码修改成功"),w.logout(),p.replace("/login")},P=async()=>{u.value.resetFields()};return(d,e)=>{const o=S,s=U,n=R,_=C;return E(),b(k,{title:"重置密码"},{default:t(()=>[l(_,{model:r.value,rules:f,"label-width":"100px",ref_key:"formRef",ref:u,onSubmit:e[3]||(e[3]=V(()=>{},["prevent"])),style:{width:"50%"}},{default:t(()=>[l(s,{prop:"oldPwd",label:"旧密码"},{default:t(()=>[l(o,{modelValue:r.value.oldPwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.oldPwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,{prop:"newPwd",label:"新密码"},{default:t(()=>[l(o,{modelValue:r.value.newPwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.newPwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,{prop:"rePwd",label:"确认新密码"},{default:t(()=>[l(o,{modelValue:r.value.rePwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.rePwd=a),type:"password"},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(n,{type:"primary",onClick:g},{default:t(()=>e[4]||(e[4]=[i("提交")])),_:1}),l(n,{type:"default",onClick:P},{default:t(()=>e[5]||(e[5]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{L as default};
