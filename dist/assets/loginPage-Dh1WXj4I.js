import{u as A,r as E,a as y,c as f,o as g,w as a,b as s,d as n,e as d,f as v,g as P,E as c,h as I,i as M,j as N,k as b,l as _}from"./index-C_bpROGF.js";import{E as h,a as q}from"./el-col-BPAVpfwF.js";import{E as S,a as j}from"./el-form-item-BcP7L3nL.js";import{_ as z,E as L}from"./_plugin-vue_export-helper-CBPVf6gk.js";import{E as Z}from"./el-checkbox-DUkWW9JL.js";import{E as $}from"./el-input-CBmRvMQY.js";import{E as D}from"./index-CXQQrPLr.js";import"./_baseClone-8WbI7nzj.js";import"./isEqual-BezYRF5f.js";const G={class:"remenber"},H={__name:"loginPage",setup(J){const C=A(),m=E("login"),w=y({username:[{required:!0,message:"请输入用户名",trigger:"change"},{min:6,max:10,message:"必须为6-10位数字或字母",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"必须为6-10位数字或字母",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"change"},{min:6,max:10,message:"6-10位",trigger:"blur"}],repassword:[{validator:(t,e,p)=>{e!==o.password?p(new Error("两次输入的密码不一致")):p()},trigger:["blur","change"]}]}),o=y({username:"",password:"",repassword:""}),u=E(null),x=()=>{m.value=m.value==="login"?"registe":"login",u.value.resetFields()},B=async()=>{await u.value.validate(),await P(o),c.success("注册成功"),m.value="login"},R=async()=>{try{await u.value.validate();const t=await I(o);C.setToken("Bearer "+t.data.token),c.success("登录成功"),setTimeout(async()=>{await M.replace("/article/channel")},1e3)}catch(t){console.log(t)}},U=async()=>{if(await D({confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,message:"确定要重置密码吗？"}),!o.username)return c.warning("请输入用户名");await N(o),c.success("密码重置成功，初始密码为六个1")};return(t,e)=>{const p=h,i=$,l=S,F=Z,V=L,k=j,T=q;return g(),f(T,null,{default:a(()=>[s(p,{span:12},{default:a(()=>[n("div",{class:"bg",onClick:e[0]||(e[0]=(...r)=>t.testFn&&t.testFn(...r))})]),_:1}),s(p,{span:8,push:2},{default:a(()=>[m.value==="login"?(g(),f(k,{key:0,class:"form",model:o,ref_key:"formRef",ref:u,rules:w},{default:a(()=>[e[7]||(e[7]=n("h2",null,"登录",-1)),s(l,{class:"ipt",prop:"username"},{default:a(()=>[s(i,{modelValue:o.username,"onUpdate:modelValue":e[1]||(e[1]=r=>o.username=r),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),s(l,{class:"ipt",prop:"password"},{default:a(()=>[s(i,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=r=>o.password=r),"prefix-icon":d(_),placeholder:"请输入密码",type:"password"},null,8,["modelValue","prefix-icon"])]),_:1}),s(l,null,{default:a(()=>[n("div",G,[s(F,{label:"记住我"}),n("p",{onClick:U},"忘记密码")])]),_:1}),s(l,null,{default:a(()=>[s(V,{onClick:R,class:"btn",type:"primary"},{default:a(()=>e[6]||(e[6]=[v("登录")])),_:1})]),_:1}),n("p",{onClick:x},"注册→")]),_:1},8,["model","rules"])):(g(),f(k,{key:1,class:"form",model:o,ref_key:"formRef",ref:u,rules:w},{default:a(()=>[e[9]||(e[9]=n("h2",null,"注册",-1)),s(l,{class:"ipt",prop:"username"},{default:a(()=>[s(i,{modelValue:o.username,"onUpdate:modelValue":e[3]||(e[3]=r=>o.username=r),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),s(l,{class:"ipt",prop:"password"},{default:a(()=>[s(i,{modelValue:o.password,"onUpdate:modelValue":e[4]||(e[4]=r=>o.password=r),"prefix-icon":d(_),placeholder:"请输入密码",type:"password"},null,8,["modelValue","prefix-icon"])]),_:1}),s(l,{prop:"repassword"},{default:a(()=>[s(i,{modelValue:o.repassword,"onUpdate:modelValue":e[5]||(e[5]=r=>o.repassword=r),"prefix-icon":d(_),placeholder:"请再次输入密码",type:"password"},null,8,["modelValue","prefix-icon"])]),_:1}),s(l,null,{default:a(()=>[s(V,{class:"btn",type:"primary",onClick:B},{default:a(()=>e[8]||(e[8]=[v("注册")])),_:1})]),_:1}),n("p",{onClick:x},"←返回")]),_:1},8,["model","rules"]))]),_:1})]),_:1})}}},ae=z(H,[["__scopeId","data-v-4c8773dc"]]);export{ae as default};
